---
output: github_document
---


```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

<!-- badges: start -->
[![Travis build status](https://travis-ci.org/alexpavlakis/sudokuplyr.svg?branch=master)](https://travis-ci.org/alexpavlakis/sudokuplyr)
<!-- badges: end -->

# sudokuplyr

The goal of sudokuplyr is to provide simple functions for solving, creating, and analyzing sudoku puzzles in R. Key functions include:

* `solve_sudoku`
* `is_unique`
* `is_legal`
* `print_sudoku`
* `generate_sudoku`
* `generate_puzzle`
* `get_all_solutions`
* `analyze_sudoku`

## Installation

You can install sudoku from github with:

``` r
# install.packages("devtools")
devtools::install_github("alexpavlakis/sudoku")
```


## Examples

The workhorse function is `solve_sudoku`, which takes three main arguments:

* `sudoku_matrix`: an unsolved sudoku puzzle in matrix form, with `NA` in unknown cells;
* `verbose`: `TRUE` if you want the function to print intermediate steps (defaults to `FALSE`)
* `shuffle`: `TRUE` if you want to induce randomness in the backtracking algorithm used if the logical algorithm fails (defaults to `TRUE`).

`is_legal` will tell you if a puzzle is completed correctly.
`is_unique` will tell you if an unsolved puzzle has a unique solution.

`solve_sudoku` first attempts to solve the sudoku with basic sudoku logic.  If this does not work, it uses a backtracking algorithm to find a solution (if one exists).  Core functions are written in C++ for speed.

```{r, puzzle}
library(sudokuplyr)

# An unsolved puzzle
s <- as.sudoku(sudoku)
s

# Solve
solved_puzzle <- solve_sudoku(s)
solved_puzzle

# Check that it is correct
is_legal(solved_puzzle)
```


`solve_sudoku` completes puzzles in the blink of an eye.  The example below shows the time taken to solve an easy puzzle (49 empty cells) and a hard puzzle (59 empty cells).  The easy puzzle is solved in <10 milliseconds and the hard puzzle is solved in a fraction of a second on a MacBook Air.

```{r showpuzzles}
# Easy puzzle - 49 empty cells
sum(is.na(sudoku))

# Hard Puzzle - 59 empty cells
summary(as.sudoku(hard_sudoku))

```
```{r rmb, warning=F, message=F, results=F}
library(microbenchmark)
m <- microbenchmark(easy = solve_sudoku(sudoku),
                    hard = solve_sudoku(hard_sudoku), 
                    times = 100, unit = 's')
```
```{r showmb}
print(m, digits = 3)
```

`generate_sudoku` creates randomly generated complete sudoku puzzles.  The `seed` argument can be used to create reproducible random puzzles or left `NULL` (default).  `generate_puzzle` creates randomly generated incomplete sudoku puzzles with a specified number of clues.

```{r gensudoku}
new_puzzle <- generate_puzzle(clues = 32, unique = TRUE, seed = 56)
print(new_puzzle)
```


`get_all_solutions` generates all possible solutions for a given puzzle.  Puzzles with fewer than 20-25 clues (depending on the puzzle, of course), can have _a lot_ of solutions, and this function can take a while to find them all.  Beware.  Most puzzles that appear in newspapers and magazines have only one solution.

```{r generate_all}
# This puzzle has a lot of solutions
puzzle <- generate_puzzle(clues = 28, unique = FALSE, seed = 56)
all_solutions <- get_all_solutions(puzzle)
length(all_solutions)
```


`analyze_sudoku` returns some helpful information about sudoku puzzles.  Both the easy and hard sudokus that come with the package have legal, unique solutions; but the easy sudoku has more clues, "hidden singles", and "naked singles" (unknown cells that can be populated with simple logic).


```{r as}
# Compare the easy and hard sudokus that come with the package
analyze_sudoku(sudoku)
analyze_sudoku(hard_sudoku)
```


The `plot` method displays a sudoku in R's graphical interface.

```{r plotme}
plot(as.sudoku(sudoku))
```
